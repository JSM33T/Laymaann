var e;function o(e,o,t,n,r,i,l){try{var c=e[i](l),a=c.value}catch(e){t(e);return}c.done?o(a):Promise.resolve(a).then(n,r)}function t(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var l=e.apply(t,n);function c(e){o(l,r,i,c,a,"next",e)}function a(e){o(l,r,i,c,a,"throw",e)}c(void 0)})}}import{acToast as n,acPostData as r,acFormHandler as i,acInit as l}from"../../global.js";let c=document.getElementById("userName"),a=document.getElementById("recSubmitBtn"),u=new bootstrap.Modal(document.getElementById("otpMdl")),s=document.getElementById("submitOtp"),m=document.getElementById("otpVal");function d(){return p.apply(this,arguments)}function p(){return(p=t(function*(){c.value.trim().length<=1?n("error","Username too short"):yield function(e){return y.apply(this,arguments)}(c.value)})).apply(this,arguments)}function y(){return(y=t(function*(e){try{let o=yield r("/api/account/recover",{userName:e});console.log(o),n(o.type,o.data),"ok"===o.type&&(localStorage.getItem("curr_link"),u.show())}catch(e){console.error("Error during login:",e),n("error","Something went wrong")}finally{a.innerHTML="Recover"}})).apply(this,arguments)}l([()=>i("recovery-form",d),()=>i("otp-form",g)]);let g=(e=t(function*(){s.innerHTML="Wait...",s.classList.add("pe-none"),console.log(m.value);try{let e={OTP:m.value.trim()},o=yield r("/api/account/loginviaotp",e);console.log(o),"ok"===o.type?(u.hide(),n("success","Logging into your acc. Make sure to set your password"),setTimeout(f,2e3)):(console.log("error",o.data),n("error","Invalid OTP"))}catch(e){console.error("Error during login:",e),n("error","something went wrong")}finally{s.innerHTML="Verify",s.classList.remove("pe-none")}}),function(){return e.apply(this,arguments)}),f=()=>window.location.href="/";
//# sourceMappingURL=recovery.js.map