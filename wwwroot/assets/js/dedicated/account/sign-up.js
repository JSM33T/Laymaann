var e,t;function n(e,t,n,o,r,l,a){try{var i=e[l](a),s=i.value}catch(e){n(e);return}i.done?t(s):Promise.resolve(s).then(o,r)}function o(e){return function(){var t=this,o=arguments;return new Promise(function(r,l){var a=e.apply(t,o);function i(e){n(a,r,l,i,s,"next",e)}function s(e){n(a,r,l,i,s,"throw",e)}i(void 0)})}}import{acInit as r,acToast as l,acPostData as a,acFormHandler as i}from"../../global.js";let s=document.getElementById("firstName"),u=document.getElementById("lastName"),c=document.getElementById("userName"),d=document.getElementById("emailId"),m=document.getElementById("pWord"),g=document.getElementById("pWordConfirm"),p=document.getElementById("submitBtn"),y=new bootstrap.Modal(document.getElementById("otpMdl")),f=document.getElementById("submitOtp"),v=document.getElementById("otpVal");r([()=>i("signup-form",h),()=>i("otp-form",I)]);let h=(e=o(function*(){let e={firstName:s.value,lastName:u.value,userName:c.value,eMail:d.value,password:m.value,confirmPassword:g.value};s.value.length<=1?l("error","Username too short"):c.value.length<4?l("error","Username too short"):m.value.length<=6?l("error","Password should be atleast 6 characters long"):g.value!=m.value?l("error","Passwords dont match"):function(e){return w.apply(this,arguments)}(e)}),function(){return e.apply(this,arguments)});function w(){return(w=o(function*(e){p.innerHTML="Wait...",p.classList.add("pe-none");try{let t=yield a("/api/account/signup",e);l(t.type,t.data),console.log(t),"ok"===t.type&&(p.innerHTML="Logging in...",y.show())}catch(e){console.log("typescirpt side error"),console.error("Error during login:",e)}finally{p.innerHTML="Log In",p.classList.remove("pe-none")}})).apply(this,arguments)}let I=(t=o(function*(){f.innerHTML="Wait...",f.classList.add("pe-none"),console.log(v.value),console.log(c.value);try{let e={OTP:v.value.trim(),UserName:c.value.trim()},t=yield a("/api/user/verification",e);console.log(e),console.log(t),"ok"===t.type?(y.hide(),l("success","user verified redirecting to login page..."),setTimeout(B,2e3)):l("error",t.data)}catch(e){l("error","something went wrong")}finally{f.innerHTML="Verify",f.classList.remove("pe-none")}}),function(){return t.apply(this,arguments)}),B=()=>window.location.href="/account/login";
//# sourceMappingURL=sign-up.js.map