{"version":3,"sources":["../../../../../Scripts/dedicated/account/sign-up.ts"],"sourcesContent":["import { User } from '../../Interfaces/user.interface.js';\r\nimport { acInit, acToast, acPostData, acFormHandler } from '../../global.js';\r\ndeclare const bootstrap: { Modal: new (arg0: HTMLElement | null) => any; };\r\n\r\nconst firstName = document.getElementById('firstName') as HTMLInputElement;\r\nconst lastName = document.getElementById('lastName') as HTMLInputElement;\r\nconst userName = document.getElementById('userName') as HTMLInputElement;\r\nconst emailId = document.getElementById('emailId') as HTMLInputElement;\r\nconst pWord = document.getElementById('pWord') as HTMLInputElement;\r\nconst pWordConfirm = document.getElementById('pWordConfirm') as HTMLInputElement;\r\nconst signupBtn = document.getElementById('submitBtn') as HTMLButtonElement;\r\n\r\nconst otpModal = new bootstrap.Modal(document.getElementById('otpMdl'));\r\nconst otpSubmit = document.getElementById(\"submitOtp\") as HTMLButtonElement;\r\nconst otpVal = document.getElementById(\"otpVal\") as HTMLInputElement;\r\n\r\nacInit([\r\n        //override default form post action\r\n        () => acFormHandler('signup-form', submitLoginForm),\r\n        () => acFormHandler('otp-form', verifyDeets)\r\n]);\r\n\r\nconst submitLoginForm = async function () {\r\n        const signupdata = {\r\n                firstName: firstName.value,\r\n                lastName: lastName.value,\r\n                userName: userName.value,\r\n                eMail: emailId.value,\r\n                password: pWord.value,\r\n                confirmPassword: pWordConfirm.value\r\n        }\r\n\r\n        if (firstName.value.length <= 1) {\r\n                acToast(\"error\", \"Username too short\");\r\n        } else if (userName.value.length < 4) {\r\n                acToast(\"error\", \"Username too short\");\r\n        } else if (pWord.value.length <= 6) {\r\n                acToast('error', 'Password should be atleast 6 characters long')\r\n        } else if (pWordConfirm.value != pWord.value) {\r\n                acToast('error', 'Passwords dont match');\r\n        } else {\r\n                postToSignUpApi(signupdata);\r\n        }\r\n};\r\n\r\nasync function postToSignUpApi(signupdata: any) {\r\n        const apiUrl = '/api/account/signup';\r\n        signupBtn.innerHTML = \"Wait...\";\r\n        signupBtn.classList.add('pe-none');    //prevent clickign till the response arrives\r\n        try {\r\n                const response = await acPostData(apiUrl, signupdata);\r\n                acToast(response.type, response.data);\r\n                console.log(response);\r\n                if (response.type === \"ok\") {\r\n                        signupBtn.innerHTML = \"Logging in...\";\r\n                        otpModal!.show();\r\n                }\r\n        } catch (error) {\r\n            console.log(\"typescirpt side error\")\r\n                console.error('Error during login:', error);\r\n        } finally {\r\n                signupBtn.innerHTML = \"Log In\";\r\n                signupBtn.classList.remove('pe-none');\r\n        }\r\n};\r\n\r\nconst verifyDeets = async function () {\r\n\r\n        otpSubmit.innerHTML = \"Wait...\";\r\n        otpSubmit.classList.add('pe-none');\r\n        console.log(otpVal.value);\r\n        console.log(userName.value);\r\n\r\n        try {\r\n                const dt = {\r\n                        OTP: otpVal.value.trim(),\r\n                        UserName: userName.value.trim()\r\n                }\r\n                const response = await acPostData(\"/api/user/verification\", dt);\r\n                console.log(dt);\r\n                console.log(response);\r\n                if (response.type === \"ok\") {\r\n                        otpModal!.hide();\r\n                        acToast(\"success\", \"user verified redirecting to login page...\");\r\n                        setTimeout(redirect, 2000);\r\n                }\r\n                else {\r\n                    acToast(\"error\", response.data);\r\n                }\r\n        } catch (error) {\r\n                acToast('error', 'something went wrong');\r\n        } finally {\r\n                otpSubmit.innerHTML = \"Verify\";\r\n                otpSubmit.classList.remove('pe-none');\r\n        }\r\n};\r\n\r\nconst redirect = () => window.location.href = \"/account/login\";\r\n"],"names":["acInit","acToast","acPostData","acFormHandler","firstName","document","getElementById","lastName","userName","emailId","pWord","pWordConfirm","signupBtn","otpModal","bootstrap","Modal","otpSubmit","otpVal","submitLoginForm","verifyDeets","signupdata","value","eMail","password","confirmPassword","length","postToSignUpApi","innerHTML","classList","add","response","type","data","console","log","show","error","remove","dt","OTP","trim","UserName","hide","setTimeout","redirect","window","location","href"],"mappings":"6TACA,OAASA,UAAAA,CAAM,CAAEC,WAAAA,CAAO,CAAEC,cAAAA,CAAU,CAAEC,iBAAAA,CAAa,KAAQ,iBAAkB,CAG7E,IAAMC,EAAYC,SAASC,cAAc,CAAC,aACpCC,EAAWF,SAASC,cAAc,CAAC,YACnCE,EAAWH,SAASC,cAAc,CAAC,YACnCG,EAAUJ,SAASC,cAAc,CAAC,WAClCI,EAAQL,SAASC,cAAc,CAAC,SAChCK,EAAeN,SAASC,cAAc,CAAC,gBACvCM,EAAYP,SAASC,cAAc,CAAC,aAEpCO,EAAW,IAAIC,UAAUC,KAAK,CAACV,SAASC,cAAc,CAAC,WACvDU,EAAYX,SAASC,cAAc,CAAC,aACpCW,EAASZ,SAASC,cAAc,CAAC,UAEvCN,EAAO,CAEC,IAAMG,EAAc,cAAee,GACnC,IAAMf,EAAc,WAAYgB,GACvC,EAED,IAAMD,KAAkB,EAAA,YAChB,IAAME,EAAa,CACXhB,UAAWA,EAAUiB,KAAK,CAC1Bd,SAAUA,EAASc,KAAK,CACxBb,SAAUA,EAASa,KAAK,CACxBC,MAAOb,EAAQY,KAAK,CACpBE,SAAUb,EAAMW,KAAK,CACrBG,gBAAiBb,EAAaU,KAAK,AAC3C,CAEIjB,CAAAA,EAAUiB,KAAK,CAACI,MAAM,EAAI,EACtBxB,EAAQ,QAAS,sBACdO,EAASa,KAAK,CAACI,MAAM,CAAG,EAC3BxB,EAAQ,QAAS,sBACdS,EAAMW,KAAK,CAACI,MAAM,EAAI,EACzBxB,EAAQ,QAAS,gDACdU,EAAaU,KAAK,EAAIX,EAAMW,KAAK,CACpCpB,EAAQ,QAAS,wBAEjByB,SAIeN,CAAe,SAA/BM,yBAJiBN,EAEhC,wDAEeM,WAAAA,EAAf,EAAA,UAA+BN,CAAe,EAEtCR,EAAUe,SAAS,CAAG,UACtBf,EAAUgB,SAAS,CAACC,GAAG,CAAC,WACxB,GAAI,CACI,IAAMC,EAAW,MAAM5B,EAJhB,sBAImCkB,GAC1CnB,EAAQ6B,EAASC,IAAI,CAAED,EAASE,IAAI,EACpCC,QAAQC,GAAG,CAACJ,GACU,OAAlBA,EAASC,IAAI,GACTnB,EAAUe,SAAS,CAAG,gBACtBd,EAAUsB,IAAI,GAE9B,CAAE,MAAOC,EAAO,CACZH,QAAQC,GAAG,CAAC,yBACRD,QAAQG,KAAK,CAAC,sBAAuBA,EAC7C,QAAU,CACFxB,EAAUe,SAAS,CAAG,SACtBf,EAAUgB,SAAS,CAACS,MAAM,CAAC,UACnC,CACR,0BAEA,IAAMlB,KAAc,EAAA,YAEZH,EAAUW,SAAS,CAAG,UACtBX,EAAUY,SAAS,CAACC,GAAG,CAAC,WACxBI,QAAQC,GAAG,CAACjB,EAAOI,KAAK,EACxBY,QAAQC,GAAG,CAAC1B,EAASa,KAAK,EAE1B,GAAI,CACI,IAAMiB,EAAK,CACHC,IAAKtB,EAAOI,KAAK,CAACmB,IAAI,GACtBC,SAAUjC,EAASa,KAAK,CAACmB,IAAI,EACrC,EACMV,EAAW,MAAM5B,EAAW,yBAA0BoC,GAC5DL,QAAQC,GAAG,CAACI,GACZL,QAAQC,GAAG,CAACJ,GACRA,AAAkB,OAAlBA,EAASC,IAAI,EACTlB,EAAU6B,IAAI,GACdzC,EAAQ,UAAW,8CACnB0C,WAAWC,EAAU,MAGzB3C,EAAQ,QAAS6B,EAASE,IAAI,CAE1C,CAAE,MAAOI,EAAO,CACRnC,EAAQ,QAAS,uBACzB,QAAU,CACFe,EAAUW,SAAS,CAAG,SACtBX,EAAUY,SAAS,CAACS,MAAM,CAAC,UACnC,CACR,+CAEMO,EAAW,IAAMC,OAAOC,QAAQ,CAACC,IAAI,CAAG"}