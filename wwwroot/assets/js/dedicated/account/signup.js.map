{"version":3,"sources":["../../../../../Scripts/dedicated/account/signup.ts"],"sourcesContent":["import { User } from '../../Interfaces/user.interface.js';\r\nimport { acInit, acToast, acPostData, acFormHandler } from '../../global.js';\r\ndeclare const bootstrap: { Modal: new (arg0: HTMLElement | null) => any; };\r\n\r\nconst firstName = document.getElementById('firstName') as HTMLInputElement;\r\nconst lastName = document.getElementById('lastName') as HTMLInputElement;\r\nconst userName = document.getElementById('userName') as HTMLInputElement;\r\nconst emailId = document.getElementById('emailId') as HTMLInputElement;\r\nconst pWord = document.getElementById('pWord') as HTMLInputElement;\r\nconst pWordConfirm = document.getElementById('pWordConfirm') as HTMLInputElement;\r\nconst signupBtn = document.getElementById('submitBtn') as HTMLButtonElement;\r\n\r\nconst otpModal = new bootstrap.Modal(document.getElementById('otpMdl'));\r\nconst otpSubmit = document.getElementById(\"submitOtp\") as HTMLButtonElement;\r\nconst otpVal = document.getElementById(\"otpVal\") as HTMLInputElement;\r\n\r\nacInit([\r\n        //override default form post action\r\n        () => acFormHandler('signup-form', submitLoginForm),\r\n        () => acFormHandler('otp-form', verifyDeets)\r\n]);\r\n\r\nconst submitLoginForm = async function () {\r\n        const signupdata = {\r\n                firstName: firstName.value,\r\n                lastName: lastName.value,\r\n                userName: userName.value,\r\n                eMail: emailId.value,\r\n                password: pWord.value,\r\n                confirmPassword: pWordConfirm.value\r\n        }\r\n\r\n        if (firstName.value.length <= 1) {\r\n                acToast(\"error\", \"Username too short\");\r\n        } else if (userName.value.length < 4) {\r\n                acToast(\"error\", \"Username too short\");\r\n        } else if (pWord.value.length <= 6) {\r\n                acToast('error', 'Password should be atleast 6 characters long')\r\n        } else if (pWordConfirm.value != pWord.value) {\r\n                acToast('error', 'Passwords dont match');\r\n        } else {\r\n                postToSignUpApi(signupdata);\r\n        }\r\n};\r\n\r\nasync function postToSignUpApi(signupdata: any) {\r\n        const apiUrl = '/api/account/signup';\r\n        signupBtn.innerHTML = \"Wait...\";\r\n        signupBtn.classList.add('pe-none');    //prevent clickign till the response arrives\r\n        try {\r\n                const response = await acPostData(apiUrl, signupdata);\r\n                acToast(response.type, response.data);\r\n                console.log(response);\r\n                if (response.type === \"ok\") {\r\n                        signupBtn.innerHTML = \"Logging in...\";\r\n                        otpModal!.show();\r\n                }\r\n        } catch (error) {\r\n            console.log(\"typescirpt side error\")\r\n                console.error('Error during login:', error);\r\n        } finally {\r\n                signupBtn.innerHTML = \"Log In\";\r\n                signupBtn.classList.remove('pe-none');\r\n        }\r\n};\r\n\r\nconst verifyDeets = async function () {\r\n\r\n        otpSubmit.innerHTML = \"Wait...\";\r\n        otpSubmit.classList.add('pe-none');\r\n        console.log(otpVal.value);\r\n        console.log(userName.value);\r\n\r\n        try {\r\n                const dt = {\r\n                        OTP: otpVal.value.trim(),\r\n                        UserName: userName.value.trim()\r\n                }\r\n                const response = await acPostData(\"/api/user/verification\", dt);\r\n                console.log(dt);\r\n                console.log(response);\r\n                if (response.type === \"ok\") {\r\n                        otpModal!.hide();\r\n                        acToast(\"success\", \"user verified redirecting to login page...\");\r\n                        setTimeout(redirect, 2000);\r\n                }\r\n                else {\r\n                        console.log(\"error\", response.data);\r\n                }\r\n        } catch (error) {\r\n                console.error('Error during login:', error);\r\n                acToast('error', 'something went wrong');\r\n        } finally {\r\n                otpSubmit.innerHTML = \"Verify\";\r\n                otpSubmit.classList.remove('pe-none');\r\n        }\r\n};\r\n\r\nconst redirect = () => window.location.href = \"/\";\r\n"],"names":["acInit","acToast","acPostData","acFormHandler","firstName","document","getElementById","lastName","userName","emailId","pWord","pWordConfirm","signupBtn","otpModal","bootstrap","Modal","otpSubmit","otpVal","submitLoginForm","verifyDeets","signupdata","value","eMail","password","confirmPassword","length","postToSignUpApi","innerHTML","classList","add","response","type","data","console","log","show","error","remove","dt","OTP","trim","UserName","hide","setTimeout","redirect","window","location","href"],"mappings":"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"}