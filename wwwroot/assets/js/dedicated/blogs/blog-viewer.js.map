{"version":3,"sources":["../../../../../Scripts/dedicated/blogs/blog-viewer.ts"],"sourcesContent":["import { acToast, acInit, classesToTags, acPostData, acFormHandler, acGetData, classesToTagsWDiv } from '../../global.js'\r\ndeclare const bootstrap: any;\r\n\r\nconst gl_slug = document.getElementById(\"ip_slug\") as HTMLInputElement;\r\nconst gl_tag = document.getElementById(\"ip_tags\") as HTMLInputElement;\r\n\r\nconst likeStat = document.getElementById(\"likesStat\") as HTMLElement;\r\n//const commentStat = document.getElementById(\"commentStat\") as HTMLElement;\r\nconst likeIcon = document.getElementById(\"likeIcon\") as HTMLElement;\r\nconst likeBtn = document.getElementById(\"likeBtn\") as HTMLButtonElement;\r\n\r\nconst blogRole = document.getElementById(\"ip_blogrole\") as HTMLInputElement;\r\nconst blogCount = document.getElementById(\"blogCount\") as HTMLElement;\r\nconst commentsHolder = document.getElementById(\"commentsHolder\") as HTMLElement;\r\n\r\nlet delModal = new bootstrap.Modal(document.getElementById('mdlDelete'));\r\nconst delbtn = document.getElementById(\"delConfirm\") as HTMLButtonElement;\r\n\r\nlet editModal = new bootstrap.Modal(document.getElementById('mdlEdit'));\r\nconst editSaveBtn = document.getElementById('saveChanges') as HTMLButtonElement;\r\n\r\nlet replyModal = new bootstrap.Modal(document.getElementById('mdlReply'));\r\nconst replySaveBtn = document.getElementById('saveReply') as HTMLButtonElement;\r\n\r\n\r\nconst global_slug = gl_slug.value;\r\nconst global_tags = gl_tag.value;\r\n\r\n\r\nacInit([\r\n    loadTags,\r\n    loadAuthors,\r\n    loadLikes,\r\n    isLiked,\r\n    loadComments,\r\n    () => likeBtn.addEventListener('click', addLike),\r\n    //() => classesToTags('img', 'rounded-3'),\r\n    () => classesToTagsWDiv('blogBody','img','size-image'),\r\n    //() => classesToTags('p', 'fs-lg'),\r\n    () => acFormHandler('comment-form', addComment),\r\n    () => delbtn.addEventListener('click', delConfirm),\r\n    () => replySaveBtn.addEventListener('click', postReply),\r\n    () => editSaveBtn.addEventListener('click', saveEdits)\r\n]);\r\n\r\nasync function applyEvents() {\r\n    let delbuttons = document.querySelectorAll('.deletecontent') as NodeListOf<HTMLButtonElement>;\r\n    let editbuttons = document.querySelectorAll('.editcontent') as NodeListOf<HTMLButtonElement>;\r\n    let replybuttons = document.querySelectorAll('.replyto') as NodeListOf<HTMLButtonElement>;\r\n\r\n\r\n    //assign events to all the listed comments and replies\r\n    delbuttons.forEach(function (button) {\r\n        button.addEventListener('click', function () {\r\n            let dataId = button.dataset.contentid;\r\n            let dataType = button.dataset.type;\r\n            delMdl(dataType, dataId);\r\n        });\r\n    });\r\n\r\n\r\n    editbuttons.forEach(function (button) {\r\n        button.addEventListener('click', function () {\r\n            let dataId = button.dataset.contentid;\r\n            let dataType = button.dataset.type;\r\n            editMdl(dataType, dataId);\r\n        })\r\n    });\r\n\r\n    replybuttons.forEach(function (button) {\r\n        button.addEventListener('click', function () {\r\n            let dataId = button.dataset.contentid;\r\n            if (dataId) {\r\n                replyMdl(dataId);\r\n            }\r\n\r\n        });\r\n    });\r\n    console.log(\"delete events attached\");\r\n}\r\n\r\n\r\n//check if the current blog is likees by the logged in user\r\nasync function isLiked() {\r\n\r\n    const data = {\r\n        slug: global_slug\r\n    };\r\n\r\n    const isliked = await acPostData('/api/blog/likestat', data)\r\n    const isBlogLiked = isliked.data;\r\n    if (isliked.type == \"ok\") {\r\n        if (isBlogLiked == true) {\r\n            likeIcon.classList.remove(\"ai-heart\");\r\n            likeIcon.classList.add(\"ai-heart-filled\");\r\n        }\r\n        else {\r\n            likeIcon.classList.remove(\"ai-heart-filled\");\r\n            likeIcon.classList.add(\"ai-heart\");\r\n        }\r\n    }\r\n    else {\r\n        console.log(\"notliked + error\");\r\n    }\r\n\r\n}\r\n\r\n//load no of likes\r\nasync function loadLikes() {\r\n    //get no of likes\r\n\r\n    const likes = await acGetData('/api/blog/' + global_slug + '/likes');\r\n    console.log(likes);\r\n\r\n    if (likes.type == \"ok\") {\r\n        likeStat.innerHTML = likes.data;\r\n    }\r\n    else {\r\n        likeStat.innerHTML = \"0\";\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n//add/remove like\r\nasync function addLike() {\r\n    const likedata = {\r\n        Slug: global_slug,\r\n    }\r\n    const resp = await acPostData('/api/blog/addlike', likedata);\r\n    console.log(resp);\r\n\r\n    loadLikes();\r\n    isLiked();\r\n}\r\n\r\n//split and arrange authors from blog-model's author property\r\nasync function loadAuthors() {\r\n    const apiUrl = '/api/blog/' + global_slug + '/authors';\r\n\r\n    try {\r\n        const response = await acGetData(apiUrl);\r\n\r\n        if (response.type === 'ok') {\r\n            const data = response.data;\r\n            let authorsdat = \"\";\r\n\r\n            if (data.length !== 0) {\r\n                for (let i = 0; i < data.length; i++) {\r\n                    authorsdat += '<a href=\"/author/' + data[i].userName + '\" class=\"no-decor\">' + data[i].firstName + ' ' + data[i].lastName + '</a>, ';\r\n                }\r\n                document.getElementById('authorsPlaceholder')!.innerHTML = authorsdat.slice(0, authorsdat.lastIndexOf(',')) + authorsdat.slice(authorsdat.lastIndexOf(',') + 1);\r\n            }\r\n        } else {\r\n            console.error('Error:', response.data);\r\n            document.getElementById('authorsPlaceholder')!.innerHTML = \"--\";\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        document.getElementById('authorsPlaceholder')!.innerHTML = \"--\";\r\n    }\r\n}\r\n\r\n//add comment and refresh comment span\r\nasync function addComment() {\r\n    const blgcmnt = document.getElementById('blog_comment') as HTMLInputElement;\r\n    if (blgcmnt.value.length < 2) {\r\n        acToast(\"error\", \"comment too short\");\r\n    }\r\n    else {\r\n        const cmntBtn = document.getElementById('commentbutton') as HTMLButtonElement;\r\n        cmntBtn.innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>posting.. ';\r\n        cmntBtn.classList.add('pe-none');\r\n\r\n        const commentData = {\r\n            Slug: global_slug,\r\n            Comment: blgcmnt.value,\r\n        };\r\n        const resp = await acPostData('/api/blog/comment/add', commentData);\r\n        try {\r\n            acToast(resp.type, resp.data);\r\n            cmntBtn.innerHTML = 'Post Comment';\r\n            loadComments();\r\n            cmntBtn.classList.remove('pe-none');\r\n            blgcmnt.value = \"\";\r\n\r\n        } catch (error: any) {\r\n            console.log(\"catch block\" + error);\r\n        }\r\n        finally {\r\n            cmntBtn.innerHTML = 'Post Comment';\r\n            cmntBtn.classList.remove('pe-none');\r\n        }\r\n    }\r\n}\r\n\r\n//load comment span\r\nasync function loadComments() {\r\n    const roleData = blogRole.value;\r\n    const data = {\r\n        Slug: global_slug\r\n    };\r\n\r\n    const response = await acPostData('/api/blog/comments/load', data)\r\n    console.log(response);\r\n    // response.data.sort((a, b) => a.id - b.id);\r\n    let commentsHTML = \"\";\r\n    let c = 0;\r\n    if (response.data.length == 0) {\r\n        commentsHTML = \"\";\r\n    }\r\n    else {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n            const comment = response.data[i];\r\n            c = i + 1;\r\n            commentsHTML += `<div class=\"border-bottom py-4 mt-2 mb-4\">\r\n                                <div class=\"d-flex align-items-center pb-1 mb-3\">\r\n                                    <img class=\"rounded-circle\" src=\"/assets/images/avatars/default/${comment.avatar}.png\" width=\"48\" alt=\"Comment author\">\r\n                                    <div class=\"ps-3\">\r\n                                        <h6 class=\"mb-0\">${comment.fullname}</h6><span class=\"fs-sm text-muted\">${comment.date}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"btn-group-sm me-2 ml-2 mx-2\" style=\"float:right;\" role=\"group\" aria-label=\"Settings group\">\r\n                                    ${roleData !== 'guest' ? `<button type=\"button\" data-contentid=\"${comment.id}\" class=\"replyto btn btn-secondary btn-icon px-2\"><i class=\"ai-redo\"></i></button>&nbsp;` : ''}\r\n                                    ${comment.edit ? `<button type=\"button\" data-type=\"comment\" data-contentid=\"${comment.id}\" class=\"editcontent btn btn-secondary btn-icon px-2\"><i class=\"ai-edit\"></i></button>&nbsp;` : ''}\r\n                                    ${comment.edit ? `<button type=\"button\" data-type=\"comment\" data-contentid=\"${comment.id}\" class=\"deletecontent btn btn-secondary btn-icon px-2\"><i class=\"ai-trash\"></i></button>&nbsp;` : ''}\r\n                                </div>\r\n                                <span class=\"pb-2 mb-0\" id=\"comment_${comment.id}\">${comment.comment}</span>\r\n                            </div>\r\n                            `;\r\n\r\n\r\n            if (comment.replies && comment.replies.length > 0) {\r\n                comment.replies.sort((a, b) => a.replyId - b.replyId);\r\n                for (let j = 0; j < comment.replies.length; j++) {\r\n                    const reply = comment.replies[j];\r\n                    commentsHTML +=\r\n                        `   <div class=\"card card-body border-0 bg-secondary mt-4\">\r\n                                <div class=\"d-flex align-items-center pb-1 mb-3\">\r\n                                    <img class=\"rounded-circle\" src=\"/assets/images/avatars/default/${reply.replyAvatar}.png\" width=\"48\" alt=\"Comment author\">\r\n                                    <div class=\"ps-3\">\r\n                                        <h6 class=\"mb-0\">${reply.replyFullName}</h6><span class=\"fs-sm text-muted\">${reply.replyDate}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"d-flex align-items-center justify-content-between mb-3\" role=\"group\" aria-label=\"Settings group\">\r\n                                    <p class=\"mb-0\"><a class=\"fw-bold text-decoration-none\" href=\"#\">@${comment.username}</a>&nbsp;&nbsp;<span id=\"reply_${reply.replyId}\">${reply.replyComment}</span></p>\r\n                                    <div>\r\n                                        ${reply.replyEdit ? `<button type=\"button\" data-type=\"reply\" data-contentid=\"${reply.replyId}\" data-action=\"edit\" class=\"editcontent btn btn-sm btn-secondary btn-icon px-2\"><i class=\"ai-edit\"></i></button>&nbsp;` : ''}\r\n                                        ${reply.replyEdit ? `<button type=\"button\" data-type=\"reply\" data-contentid=\"${reply.replyId}\" class=\"deletecontent btn btn-sm btn-secondary btn-icon px-2\"><i class=\"ai-trash\"></i></button>&nbsp;` : ''}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            `;\r\n                }\r\n            }\r\n            commentsHTML += `</div>`;\r\n        }\r\n    }\r\n    commentsHolder.innerHTML = commentsHTML;\r\n    blogCount.innerHTML = c.toString();\r\n    applyEvents();\r\n\r\n}\r\n\r\n//load tags related to slug\r\nasync function loadTags() {\r\n    var input = global_tags;\r\n    var parts = input.split(',');\r\n    var tags = \"\";\r\n    parts.forEach(function (part) {\r\n        var words = part.split(' ');\r\n        for (var i = 0; i < words.length; i++) {\r\n            tags = tags + `<a class=\"btn btn-outline-secondary btn-sm rounded-pill mt-2 ms-2\" href=\"/blogs/tag/${words[i]}\">${words[i]}</a>`;\r\n\r\n        }\r\n    });\r\n    document.getElementById('tagsPlaceholder')!.innerHTML = tags;\r\n}\r\n\r\n\r\nasync function editMdl(contenttype: any, contentid: any) {\r\n    // delModal!.show();\r\n    const ip = document.getElementById('editIp') as HTMLTextAreaElement;\r\n    let something: string = \"\";\r\n    if (contenttype == \"comment\") {\r\n        something = \"comment_\" + contentid;\r\n    }\r\n    else if (contenttype == \"reply\") {\r\n        something = \"reply_\" + contentid;\r\n    }\r\n\r\n    let currComment = document.getElementById(something) as HTMLSpanElement;\r\n    if (currComment) {\r\n        ip.value = currComment.innerHTML;\r\n        console.log(currComment.innerHTML);\r\n    }\r\n    localStorage.setItem('type', contenttype);\r\n    localStorage.setItem('contentid', contentid);\r\n    editModal!.show();\r\n}\r\n\r\nasync function saveEdits() {\r\n    let ipedits = document.getElementById('editIp') as HTMLTextAreaElement;\r\n    let contentid = localStorage.getItem('contentid');\r\n    let type = localStorage.getItem('type');\r\n    let url = \"/api/blog/\" + type + \"/edit\";\r\n    const data = {\r\n        Id: contentid,\r\n        comment: ipedits.value\r\n    }\r\n    let resp = await acPostData(url, data);\r\n    console.log(data);\r\n    console.log(resp);\r\n    await loadComments();\r\n    editModal!.hide();\r\n}\r\n\r\nasync function replyMdl(contentid: string) {\r\n    localStorage.setItem('action', 'reply');\r\n    localStorage.setItem('contentid', contentid);\r\n    replyModal!.show();\r\n}\r\n\r\nasync function postReply() {\r\n    let contentid = localStorage.getItem('contentid');\r\n    let something = document.getElementById('txtarReply') as HTMLTextAreaElement;\r\n    console.log(contentid + \"\\n\" + something.value);\r\n    try {\r\n        const resp = await acPostData('/api/blog/reply/add', {\r\n            CommentId: contentid?.trim(),\r\n            ReplyText: something.value.trim(),\r\n            Reply: something.value.trim()\r\n        });\r\n        //acToast(resp.type, resp.data);\r\n        acToast(\"Success\", resp.data);\r\n    }\r\n    catch {\r\n        acToast('error', 'something went wrong');\r\n    }\r\n    finally {\r\n        replyModal!.hide();\r\n        something.value = \"\";\r\n        loadComments();\r\n    }\r\n}\r\n\r\nasync function delMdl(contenttype: any, contentid: any) {\r\n    let c_type = document.getElementById(\"mdlContentType\") as HTMLElement;\r\n    if (contenttype == \"comment\") {\r\n        c_type.innerHTML = \"comment\";\r\n        delModal!.show();\r\n    }\r\n    else if (contenttype == \"reply\") {\r\n        c_type.innerHTML = \"reply\";\r\n        delModal!.show();\r\n    }\r\n\r\n    localStorage.setItem('content-type', contenttype);\r\n    localStorage.setItem('content-id', contentid);\r\n    localStorage.setItem('action', \"delete\");\r\n}\r\n\r\nasync function delConfirm() {\r\n    if (localStorage.getItem('action') == \"delete\") {\r\n        let did = localStorage.getItem('content-type');\r\n        const cid = localStorage.getItem('content-id');\r\n        if (did == \"comment\") {\r\n            const resp = await acPostData('/api/blog/comment/delete', {\r\n                id: cid\r\n            })\r\n            delModal.hide();\r\n            acToast(\"Success\", resp.data)\r\n        }\r\n        else if (did == \"reply\") {\r\n            const resp = await acPostData('/api/blog/reply/delete', {\r\n                replyid: cid\r\n            })\r\n            delModal.hide();\r\n            acToast(\"Success\", resp.data)\r\n        }\r\n    }\r\n    loadComments();\r\n    localStorage.removeItem('action');\r\n}\r\n\r\n"],"names":["acToast","acInit","acPostData","acFormHandler","acGetData","classesToTagsWDiv","gl_slug","document","getElementById","gl_tag","likeStat","likeIcon","likeBtn","blogRole","blogCount","commentsHolder","delModal","bootstrap","Modal","delbtn","editModal","editSaveBtn","replyModal","replySaveBtn","global_slug","value","global_tags","applyEvents","delbuttons","querySelectorAll","editbuttons","replybuttons","forEach","button","addEventListener","dataId","dataset","contentid","delMdl","contenttype","type","editMdl","replyMdl","console","log","isLiked","isliked","slug","isBlogLiked","data","classList","remove","add","loadLikes","likes","innerHTML","addLike","Slug","loadAuthors","response","authorsdat","length","i","userName","firstName","lastName","slice","lastIndexOf","error","addComment","blgcmnt","cmntBtn","commentData","Comment","resp","loadComments","roleData","commentsHTML","c","comment","avatar","fullname","date","id","edit","replies","sort","a","b","replyId","j","reply","replyAvatar","replyFullName","replyDate","username","replyComment","replyEdit","toString","loadTags","parts","input","split","tags","part","words","ip","something","currComment","localStorage","setItem","show","saveEdits","ipedits","getItem","Id","hide","postReply","CommentId","trim","ReplyText","Reply","c_type","delConfirm","did","cid","replyid","removeItem"],"mappings":"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"}