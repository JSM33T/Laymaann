{"version":3,"sources":["../../../../Scripts/dedicated/home.ts"],"sourcesContent":["import { Email } from '../Interfaces/email.interface.js';\r\nimport { acInit, acGetData, acPostData, acToast, validateEmail, acSetEvent, acFormHandler } from '../global.js';\r\n\r\nconst mailForm = document.querySelector('.subscription-form') as HTMLFormElement;\r\n\r\nacInit([\r\n    loadTopBlogs,\r\n    () => acFormHandler('sub-form', submitMail)\r\n])\r\n\r\nasync function submitMail() {\r\n        const emailInput = document.getElementById('subscr-email') as HTMLInputElement;\r\n        const emailData = {\r\n            email: emailInput.value,\r\n            origin: \"HomePage\",\r\n        };\r\n        await postEmailToAPI(emailData);\r\n}\r\n\r\nasync function postEmailToAPI(emailData: Email) {\r\n\r\n    if (!validateEmail(emailData.email)) {\r\n        acToast(\"error\", \"Invalid email\")\r\n        return;\r\n    }\r\n    const submitBtn = document.getElementById('submitMail') as HTMLButtonElement;\r\n    submitBtn.innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;loading...';\r\n    const apiUrl = '/api/mailinglist/subscribe';\r\n    const resp = await acPostData(apiUrl, emailData);\r\n    try {\r\n        acToast('mail submitted', resp.data);\r\n        mailForm.reset();\r\n    } catch (error: any) {\r\n        acToast(resp.type, error.data);\r\n    }\r\n    finally {\r\n        submitBtn.textContent = \"Subscribe\";\r\n    }\r\n}\r\n\r\nasync function loadTopBlogs() {\r\n    const resp = await acGetData(\"/api/topblogs/get\");\r\n    console.log(resp.data);\r\n    try {\r\n        await constructArticles(resp.data);\r\n    } catch (error: any) {\r\n        console.log(error.data);\r\n    }\r\n}\r\n\r\nasync function constructArticles(responsedata: any) {\r\n    var articleTags = responsedata.map(post => `\r\n        <article class=\"swiper-slide swiper-slide-active\" role=\"group\" aria-label=\"1/2\" style=\"width: 416px; margin-right: 24px;\">\r\n            <a href=\"/blog/${post.datePosted.substring(0, 4)}/${post.urlHandle}\">\r\n                <img class=\"rounded-5\" src=\"content/blogs/${post.datePosted.substring(0, 4)}/${[post.urlHandle]}/assets/cover.webp\" alt=\"Image\">\r\n            </a>\r\n            <h3 class=\"h4 pt-4\">\r\n                <a href=\"/blog/${post.datePosted.substring(0, 4)}/${post.urlHandle}\">${post.title}\r\n                </a>\r\n            </h3>\r\n            <p>${post.description}\r\n            </p>\r\n            <div class=\"d-flex flex-wrap align-items-center pt-1 mt-n2\">\r\n                <a class=\"nav-link text-muted fs-sm fw-normal p-0 mt-2 me-3\" href=\"/blog/${post.datePosted.substring(0, 4)}/${post.urlHandle}\">\r\n                ${post.likes}\r\n                    <i class=\"ai-heart fs-lg ms-1\"></i>\r\n                </a>\r\n                <a class=\"nav-link text-muted fs-sm fw-normal d-flex align-items-end p-0 mt-2\" href=\"#\">\r\n                    ${post.comments}\r\n                    <i class=\"ai-message fs-lg ms-1\"></i>\r\n                </a>\r\n                <span class=\"fs-xs opacity-20 mt-2 mx-3\">|</span><span class=\"fs-sm text-muted mt-2\">${post.dateFormatted} </span><span class=\"fs-xs opacity-20 mt-2 mx-3\">|</span > <a class=\"badge bg-faded-primary border border-primary text-primary fs-xs mt-2\" href = \"/blogs/category/${post.locator}\">${post.category}</a>\r\n            </div>\r\n        </article>\r\n    `).join('');\r\n\r\n    const artcl = document.getElementById('articlePlaceholder') as HTMLElement;\r\n    if (artcl) {\r\n        artcl.innerHTML = articleTags;\r\n    }\r\n}"],"names":["acInit","acGetData","acPostData","acToast","validateEmail","acFormHandler","mailForm","document","querySelector","submitMail","emailData","email","emailInput","getElementById","value","origin","postEmailToAPI","submitBtn","innerHTML","resp","data","reset","error","type","textContent","loadTopBlogs","console","log","constructArticles","responsedata","articleTags","map","post","datePosted","substring","urlHandle","title","description","likes","comments","dateFormatted","locator","category","join","artcl"],"mappings":"qTACA,OAASA,UAAAA,CAAM,CAAEC,aAAAA,CAAS,CAAEC,cAAAA,CAAU,CAAEC,WAAAA,CAAO,CAAEC,iBAAAA,CAAa,CAAcC,iBAAAA,CAAa,KAAQ,cAAe,CAEhH,IAAMC,EAAWC,SAASC,aAAa,CAAC,+BAOzBC,WAAAA,iCAAAA,WAAAA,EAAf,EAAA,YAEQ,IAAMC,EAAY,CACdC,MAAOC,AAFQL,SAASM,cAAc,CAAC,gBAErBC,KAAK,CACvBC,OAAQ,UACZ,CACA,OAAMC,SAGgBN,CAAgB,SAA/BM,yBAHcN,EAC7B,mCAEeM,WAAAA,EAAf,EAAA,UAA8BN,CAAgB,EAE1C,GAAI,CAACN,EAAcM,EAAUC,KAAK,EAAG,CACjCR,EAAQ,QAAS,iBACjB,MACJ,CACA,IAAMc,EAAYV,SAASM,cAAc,CAAC,aAC1CI,CAAAA,EAAUC,SAAS,CAAG,+GAEtB,IAAMC,EAAO,MAAMjB,EADJ,6BACuBQ,GACtC,GAAI,CACAP,EAAQ,iBAAkBgB,EAAKC,IAAI,EACnCd,EAASe,KAAK,EAClB,CAAE,MAAOC,EAAY,CACjBnB,EAAQgB,EAAKI,IAAI,CAAED,EAAMF,IAAI,CACjC,QACQ,CACJH,EAAUO,WAAW,CAAG,WAC5B,CACJ,mCAEeC,WAAAA,EAAf,EAAA,YACI,IAAMN,EAAO,MAAMlB,EAAU,qBAC7ByB,QAAQC,GAAG,CAACR,EAAKC,IAAI,EACrB,GAAI,CACA,MAAMQ,SAMmBC,CAAiB,SAAnCD,yBANiBT,EAAKC,IAAI,CACrC,CAAE,MAAOE,EAAY,CACjBI,QAAQC,GAAG,CAACL,EAAMF,IAAI,CAC1B,CACJ,mCAEeQ,WAAAA,EAAf,EAAA,UAAiCC,CAAiB,EAC9C,IAAIC,EAAcD,EAAaE,GAAG,CAACC,GAAQ,CAAC;;2BAErB,EAAEA,EAAKC,UAAU,CAACC,SAAS,CAAC,EAAG,GAAG,CAAC,EAAEF,EAAKG,SAAS,CAAC;0DACrB,EAAEH,EAAKC,UAAU,CAACC,SAAS,CAAC,EAAG,GAAG,CAAC,EAAE,CAACF,EAAKG,SAAS,CAAC,CAAC;;;+BAGjF,EAAEH,EAAKC,UAAU,CAACC,SAAS,CAAC,EAAG,GAAG,CAAC,EAAEF,EAAKG,SAAS,CAAC,EAAE,EAAEH,EAAKI,KAAK,CAAC;;;eAGnF,EAAEJ,EAAKK,WAAW,CAAC;;;yFAGuD,EAAEL,EAAKC,UAAU,CAACC,SAAS,CAAC,EAAG,GAAG,CAAC,EAAEF,EAAKG,SAAS,CAAC;gBAC7H,EAAEH,EAAKM,KAAK,CAAC;;;;oBAIT,EAAEN,EAAKO,QAAQ,CAAC;;;qGAGiE,EAAEP,EAAKQ,aAAa,CAAC,mKAAmK,EAAER,EAAKS,OAAO,CAAC,EAAE,EAAET,EAAKU,QAAQ,CAAC;;;IAG1T,CAAC,EAAEC,IAAI,CAAC,IAER,IAAMC,EAAQrC,SAASM,cAAc,CAAC,sBAClC+B,GACAA,CAAAA,EAAM1B,SAAS,CAAGY,CAAU,CAEpC,0BA3EA9B,EAAO,mBAmCQyB,yBAjCX,IAAMpB,EAAc,WAAYI,GACnC"}