function e(e,t,a,n,l,r,o){try{var i=e[r](o),u=i.value}catch(e){a(e);return}i.done?t(u):Promise.resolve(u).then(n,l)}function t(t){return function(){var a=this,n=arguments;return new Promise(function(l,r){var o=t.apply(a,n);function i(t){e(o,l,r,i,u,"next",t)}function u(t){e(o,l,r,i,u,"throw",t)}i(void 0)})}}import{acFormHandler as a,acGetData as n,acInit as l,acPostData as r,acToast as o}from"../../global.js";let i=document.getElementById("firstName"),u=document.getElementById("lastName"),s=document.getElementById("emailId"),d=document.getElementById("userName"),c=document.getElementById("bio"),m=document.getElementById("avatarPlaceHolder"),p=document.getElementById("avatarDdl");function f(){return(f=t(function*(){p.addEventListener("change",()=>{var e=p.options[p.selectedIndex].dataset.img;m.style.backgroundImage="url(/assets/images/avatars/default/"+e+".png)"})})).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=t(function*(){return null})).apply(this,arguments)}function y(){return h.apply(this,arguments)}function h(){return(h=t(function*(){let e=document.getElementById("male"),t=document.getElementById("female"),a=document.getElementById("other"),l=n("/api/profile/getdetails");console.log((yield l).data);let r=(yield l).data;i.value=r.firstName,u.value=r.lastName,d.value=r.userName,s.value=r.eMail,c.value=r.bio,p.value=r.avatarId.toString(),"m"==r.gender?e.checked:"f"==r.gender?t.checked:a.checked,m.style.backgroundImage="url(/assets/images/avatars/default/"+r.avatarImg+".png)"})).apply(this,arguments)}function I(){return(I=t(function*(){var e;let t=yield n("/api/getavatars"),a=' <option value="" selected disabled>Select avatar</option>';for(e=1;e<t.data.length;e++)a+=`<option value="${t.data[e].id}" data-img="${t.data[e].image}">${t.data[e].title}</option>`;p.innerHTML=a})).apply(this,arguments)}function E(){return B.apply(this,arguments)}function B(){return(B=t(function*(){console.log(g);let e={firstName:i.value,lastName:u.value,bio:c.value,avatarId:parseInt(p.value)||1,eMail:s.value,gender:g,userName:d.value},t=yield r("/api/profile/update",e);if("ok"==t.type){o("Success",t.data),yield function(){return N.apply(this,arguments)}();let e=document.getElementsByClassName("name-placeholder");e[0].innerHTML=i.value,e[1].innerHTML=i.value}else o("error",t.data)})).apply(this,arguments)}function N(){return(N=t(function*(){let e=p.options[p.selectedIndex].getAttribute("data-img"),t=document.getElementsByClassName("avatar-placeholder");for(let a=0;a<t.length;a++)t[a].src="/assets/images/avatars/default/"+e+".png",console.log(t[a].src)})).apply(this,arguments)}function b(){return k.apply(this,arguments)}function k(){return(k=t(function*(){let e=document.getElementById("new-pass"),t=document.getElementById("confirm-pass");if(""==e.value||e.value.length<6){o("validation issue","password too short");return}if(e.value!=t.value){o("error","Passwords don't match");return}let a={password:e.value},n=yield r("/api/profile/password/update",a);console.log(n),"ok"==n.type?o("success",n.data):o("error",n.data)})).apply(this,arguments)}l([t(function*(){yield Promise.all([function(){return f.apply(this,arguments)}(),(function(){return I.apply(this,arguments)})().then(y),a("basicInfoForm",E),a("passForm",b)])})]);
//# sourceMappingURL=edit-profile.js.map