{"version":3,"sources":["../../../Scripts/main.ts"],"sourcesContent":["import { acGetData, acInit, fetchJsonFile, Url } from './global.js'\r\ndeclare const bootstrap: any;\r\ndeclare const axios: { get: (arg0: string) => Promise<{ data: string | any[]; }>; }\r\n\r\nconst shareBtn = document.getElementById('share-btn') as HTMLButtonElement;\r\nconst lsearch = document.getElementById('global_search') as HTMLInputElement;\r\n\r\nacInit([\r\n    () => { if (shareBtn) shareBtn.addEventListener('click', shareIt) },\r\n    () => lsearch.addEventListener('keyup', livesearch),\r\n    getUpdates\r\n]);\r\n\r\ninterface UpdateEntry {\r\n    type: string;\r\n    title: string;\r\n    link: string;\r\n}\r\n\r\nasync function getUpdates() {\r\n    try {\r\n        const updatesData = await fetchJsonFile<{ updates: UpdateEntry[] }>('/store/updates.json');\r\n        const updatePlaceholder = document.getElementById('updates-placeholder') as HTMLSpanElement;\r\n        if (!updatePlaceholder) return;\r\n        if (updatesData && updatesData.updates) {\r\n            const updateEntries = updatesData.updates;\r\n\r\n            for (const entry of updateEntries) {\r\n                if (entry.link.length == 0 || entry.link == \"\") {\r\n                    updatePlaceholder.innerHTML = updatePlaceholder.innerHTML + `\r\n                    <dt>${entry.type}:</dt>\r\n                    <dd class=\"nav-link\"> <span>${entry.title}</span></dd>\r\n                `;\r\n                }\r\n                else {\r\n                    updatePlaceholder.innerHTML = updatePlaceholder.innerHTML + `\r\n                    <dt>${entry.type}:</dt>\r\n                    <dd class=\"nav-link\"><a href=\"${entry.link}\"><span> ${entry.title}</span></a></dd>\r\n                `;\r\n                }\r\n            }\r\n        } else {\r\n            console.error('Invalid or missing changelog data');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching or processing changelog:', error);\r\n    }\r\n}\r\n\r\nasync function shareIt() {\r\n    const currentUrl = new Url();\r\n    const linkholder = document.getElementById('link-placeholder') as HTMLElement;\r\n    linkholder.innerHTML = currentUrl.fullUrl;\r\n\r\n    const copyBtn = document.getElementById('copy-btn') as HTMLButtonElement;\r\n    copyBtn.addEventListener('click', () => {\r\n        navigator.clipboard.writeText(linkholder.innerHTML)\r\n        copyBtn.innerHTML = '<i class=\"ai-check me-2 ms-n1\"></i>Copied!'\r\n        setTimeout(() => {\r\n            copyBtn.innerHTML = '<i class=\"ai-copy me-2 ms-n1\"></i>Copy'\r\n        }, 2000)\r\n    })\r\n}\r\n\r\nasync function livesearch() {\r\n\r\n    const searchStat = document.getElementById('search_stat');\r\n    const searchResults = document.getElementById('search_results');\r\n    if (lsearch.value.length >= 2) {\r\n        const response = await acGetData('/api/liversearch/all/' + lsearch.value);\r\n        if (response.type == 'error') {\r\n            return;\r\n        }\r\n        let sb = \"\";\r\n        console.log(response);\r\n        for (let i = 0; i < response.data.length; i++) {\r\n            sb += `\r\n            <div class=\"d-flex align-items-center border-bottom pb-4 mb-4 fade-in\">\r\n                <a class=\"position-relative d-inline-block flex-shrink-0 bg-secondary rounded-1\" href=\"${response.data[i].url}\">\r\n                <img src=\"/assets/images/search_thumbs/${response.data[i].image}.svg\" width=\"70\" alt=\"Product\" /></a>\r\n                <div class=\"ps-3\">\r\n                    <h4 class=\"h6 mb-2\"><a href=\"${response.data[i].url}\">${response.data[i].title}</a></h4>\r\n                    <span class=\"fs-sm text-muted ms-auto\">${response.data[i].description}</span>'\r\n                </div>\r\n            </div>\r\n            `;\r\n        }\r\n        searchResults!.innerHTML = sb.toString();\r\n        searchStat!.innerHTML = 'Search';\r\n    }\r\n    else {\r\n        searchResults!.innerHTML = '';\r\n        searchStat!.innerHTML = 'Search';\r\n    }\r\n    \r\n\r\n    //if (lsearch.value.length >= 2) {\r\n    //    axios.get('/api/livesearch/all/' + lsearch.value)\r\n    //        .then((response: { data: string | any[]; }) => {\r\n    //            console.log(response);\r\n    //            var sb = \"\";\r\n    //            for (var i = 0; i < response.data.length; i++) {\r\n    //                sb += `\r\n    //                <div class=\"d-flex align-items-center border-bottom pb-4 mb-4 fade-in\">\r\n    //                    <a class=\"position-relative d-inline-block flex-shrink-0 bg-secondary rounded-1\" href=\"${response.data[i].url}\">\r\n    //                    <img src=\"/assets/images/search_thumbs/${response.data[i].image}.svg\" width=\"70\" alt=\"Product\" /></a>\r\n    //                    <div class=\"ps-3\">\r\n    //                        <h4 class=\"h6 mb-2\"><a href=\"${response.data[i].url}\">${response.data[i].title}</a></h4>\r\n    //                        <span class=\"fs-sm text-muted ms-auto\">${response.data[i].description}</span>'\r\n    //                    </div>\r\n    //                </div>\r\n    //                `;\r\n    //            }\r\n    //            searchResults!.innerHTML = sb.toString();\r\n    //            searchStat!.innerHTML = 'Search';\r\n    //        })\r\n    //        .catch(error => {\r\n    //            console.error('Error:', error);\r\n    //            searchStat!.innerHTML = '';\r\n    //            searchResults!.innerHTML = '';\r\n    //        });\r\n    //}\r\n    //else {\r\n    //    searchResults!.innerHTML = '';\r\n    //    searchStat!.innerHTML = 'Search';\r\n    //}\r\n}\r\n"],"names":["acGetData","acInit","fetchJsonFile","Url","shareBtn","document","getElementById","lsearch","getUpdates","updatesData","updatePlaceholder","updates","entry","link","length","innerHTML","type","title","console","error","shareIt","currentUrl","linkholder","fullUrl","copyBtn","addEventListener","navigator","clipboard","writeText","setTimeout","livesearch","searchStat","searchResults","value","response","sb","log","i","data","url","image","description","toString"],"mappings":"qTAAA,OAASA,aAAAA,CAAS,CAAEC,UAAAA,CAAM,CAAEC,iBAAAA,CAAa,CAAEC,OAAAA,CAAG,KAAQ,aAAa,CAInE,IAAMC,EAAWC,SAASC,cAAc,CAAC,aACnCC,EAAUF,SAASC,cAAc,CAAC,0BAczBE,WAAAA,EAAf,EAAA,YACI,GAAI,CACA,IAAMC,EAAc,MAAMP,EAA0C,uBAC9DQ,EAAoBL,SAASC,cAAc,CAAC,uBAClD,GAAI,CAACI,EAAmB,OACxB,GAAID,GAAeA,EAAYE,OAAO,CAGlC,IAAK,IAAMC,KAFWH,EAAYE,OAAO,CAGjCC,AAAqB,GAArBA,EAAMC,IAAI,CAACC,MAAM,EAASF,AAAc,IAAdA,EAAMC,IAAI,CACpCH,EAAkBK,SAAS,CAAGL,EAAkBK,SAAS,CAAG,CAAC;wBACzD,EAAEH,EAAMI,IAAI,CAAC;gDACW,EAAEJ,EAAMK,KAAK,CAAC;gBAC9C,CAAC,CAGGP,EAAkBK,SAAS,CAAGL,EAAkBK,SAAS,CAAG,CAAC;wBACzD,EAAEH,EAAMI,IAAI,CAAC;kDACa,EAAEJ,EAAMC,IAAI,CAAC,SAAS,EAAED,EAAMK,KAAK,CAAC;gBACtE,CAAC,MAILC,QAAQC,KAAK,CAAC,oCAEtB,CAAE,MAAOA,EAAO,CACZD,QAAQC,KAAK,CAAC,0CAA2CA,EAC7D,CACJ,mCAEeC,WAAAA,iCAAAA,WAAAA,EAAf,EAAA,YACI,IAAMC,EAAa,IAAIlB,EACjBmB,EAAajB,SAASC,cAAc,CAAC,mBAC3CgB,CAAAA,EAAWP,SAAS,CAAGM,EAAWE,OAAO,CAEzC,IAAMC,EAAUnB,SAASC,cAAc,CAAC,YACxCkB,EAAQC,gBAAgB,CAAC,QAAS,KAC9BC,UAAUC,SAAS,CAACC,SAAS,CAACN,EAAWP,SAAS,EAClDS,EAAQT,SAAS,CAAG,6CACpBc,WAAW,KACPL,EAAQT,SAAS,CAAG,wCACxB,EAAG,IACP,EACJ,mCAEee,WAAAA,iCAAAA,WAAAA,EAAf,EAAA,YAEI,IAAMC,EAAa1B,SAASC,cAAc,CAAC,eACrC0B,EAAgB3B,SAASC,cAAc,CAAC,kBAC9C,GAAIC,EAAQ0B,KAAK,CAACnB,MAAM,EAAI,EAAG,CAC3B,IAAMoB,EAAW,MAAMlC,EAAU,wBAA0BO,EAAQ0B,KAAK,EACxE,GAAIC,AAAiB,SAAjBA,EAASlB,IAAI,CACb,OAEJ,IAAImB,EAAK,GACTjB,QAAQkB,GAAG,CAACF,GACZ,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAASI,IAAI,CAACxB,MAAM,CAAEuB,IACtCF,GAAM,CAAC;;uGAEoF,EAAED,EAASI,IAAI,CAACD,EAAE,CAACE,GAAG,CAAC;uDACvE,EAAEL,EAASI,IAAI,CAACD,EAAE,CAACG,KAAK,CAAC;;iDAE/B,EAAEN,EAASI,IAAI,CAACD,EAAE,CAACE,GAAG,CAAC,EAAE,EAAEL,EAASI,IAAI,CAACD,EAAE,CAACpB,KAAK,CAAC;2DACxC,EAAEiB,EAASI,IAAI,CAACD,EAAE,CAACI,WAAW,CAAC;;;YAG9E,CAAC,AAELT,CAAAA,EAAejB,SAAS,CAAGoB,EAAGO,QAAQ,GACtCX,EAAYhB,SAAS,CAAG,QAC5B,MAEIiB,EAAejB,SAAS,CAAG,GAC3BgB,EAAYhB,SAAS,CAAG,QAkChC,0BAvHAd,EAAO,CACH,KAAYG,GAAUA,EAASqB,gBAAgB,CAAC,QAASL,EAAS,EAClE,IAAMb,EAAQkB,gBAAgB,CAAC,QAASK,qBAU7BtB,yBARd"}